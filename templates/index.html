{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block head %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section id="hero" class="hero-section">
    <div class="hero-content">
        <h1 class="reveal-text">GFG <span class="text-gradient">Student Chapter</span></h1>
        <p class="reveal-text-sub">IEC College of Engineering & Technology</p>
        <div class="hero-stats">
            <div class="stat-card">
                <span class="stat-value stat-number" data-count="500">500+</span>
                <span class="stat-label">Members</span>
            </div>
            <div class="stat-card">
                <span class="stat-value stat-number" data-count="50">50+</span>
                <span class="stat-label">Events</span>
            </div>
            <div class="stat-card">
                <span class="stat-value stat-number" data-count="1000">1000+</span>
                <span class="stat-label">Problems Solved</span>
            </div>
        </div>
        <div class="hero-cta">
            <a href="{{ url_for('leaderboard_page') }}" class="btn-glow">Explore Leaderboard</a>
        </div>
    </div>
    <div class="hero-visual">
        <div class="gfg-orb"></div>
    </div>
</section>

<!-- Leaderboard Section -->
<section id="leaderboard" class="content-section">
    <div class="section-header">
        <h2 class="section-title">Global <span class="highlight">Leaderboard</span></h2>
        <p>Top performers from IEC Chapter</p>
    </div>
    <div class="leaderboard-container glass-card">
        <table id="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Handle</th>
                    <th>Score</th>
                    <th>Tier</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                <!-- Loaded via JS -->
            </tbody>
        </table>
    </div>
</section>

<!-- Events Section -->
<section id="events" class="content-section">
    <div class="section-header">
        <h2 class="section-title">Our <span class="highlight">Events</span></h2>
        <div class="event-tabs">
            <button class="tab-btn active" data-tab="upcoming">Upcoming</button>
            <button class="tab-btn" data-tab="ongoing">Ongoing</button>
            <button class="tab-btn" data-tab="past">Past</button>
        </div>
    </div>
    <div class="events-wrapper">
        <!-- Upcoming Events -->
        <div id="upcoming" class="tab-content events-grid active">
            {% if events %}
            {% for event in events %}
            <div class="event-card glass-card reveal-item">
                <div class="event-date">
                    {% if event.date %}
                    <span class="day">{{ event.date.split('-')[2] if event.date.split('-')|length > 2 else '??'
                        }}</span>
                    <span class="month">{{ event.date.split('-')[1] if event.date.split('-')|length > 1 else '??'
                        }}</span>
                    {% endif %}
                </div>
                <div class="event-info">
                    <h3>{{ event.title }}</h3>
                    <p>{{ event.description }}</p>
                    <span class="event-tag">{{ event.type }}</span>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <p class="empty-msg">No upcoming events.</p>
            {% endif %}
        </div>

        <!-- Ongoing Events -->
        <div id="ongoing" class="tab-content events-grid">
            {% if ongoing %}
            {% for event in ongoing %}
            <div class="event-card glass-card reveal-item">
                <div class="event-info">
                    <h3>{{ event.title }}</h3>
                    <p>{{ event.description }}</p>
                    <span class="event-tag">Ongoing</span>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <p class="empty-msg">No ongoing events.</p>
            {% endif %}
        </div>

        <!-- Past Events -->
        <div id="past" class="tab-content events-grid">
            <p class="empty-msg">Check back later for past events archive.</p>
        </div>
    </div>
</section>

<!-- Courses Section -->
<section id="courses" class="content-section">
    <div class="section-header">
        <h2 class="section-title">Premium <span class="highlight">Courses</span></h2>
        <p>Upskill yourself with GFG's best resources</p>
    </div>
    <div id="courses-container" class="courses-grid">
        {% for course in courses %}
        <div class="course-card glass-card reveal-item">
            <img src="{{ course.image }}" alt="{{ course.title }}">
            <div class="course-content">
                <h3>{{ course.title }}</h3>
                <p>{{ course.description }}</p>
                <a href="{{ course.link }}" target="_blank" class="btn-sm">View Course</a>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Deals Section -->
<section id="deals" class="content-section">
    <div class="section-header">
        <h2 class="section-title">Exclusive <span class="highlight">Deals</span></h2>
    </div>
    <div id="deals-container" class="deals-grid">
        {% for deal in deals %}
        <div class="deal-card glass-card reveal-item">
            <div class="deal-header">
                <span class="discount">{{ deal.discount }}</span>
                <span class="type">{{ deal.type }}</span>
            </div>
            <h3>{{ deal.title }}</h3>
            <p>Use Code: <strong class="coupon-code" onclick="copyCode('{{ deal.code }}')">{{ deal.code }}</strong></p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Team Section -->
<section id="team" class="content-section">
    <div class="section-header">
        <h2 class="section-title">The <span class="highlight">Team</span></h2>
    </div>
    <div id="team-container" class="team-grid">
        {% for member in team %}
        <div class="team-card glass-card reveal-item">
            <img src="{{ member.image }}" alt="{{ member.name }}">
            <h3>{{ member.name }}</h3>
            <p>{{ member.role }}</p>
            <div class="social-links">
                {% if member.linkedin %}<a href="{{ member.linkedin }}"><i data-lucide="linkedin"></i></a>{% endif %}
                {% if member.github %}<a href="{{ member.github }}"><i data-lucide="github"></i></a>{% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}